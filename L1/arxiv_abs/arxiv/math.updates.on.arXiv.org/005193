We investigate the long-time dynamics and optimal control problem of a diffuse interface model
that describes the growth of a tumor in presence of a nutrient and surrounded by host tissues. The
state system consists of a Cahn-Hilliard type equation for the tumor cell fraction and a reaction-diffusion
equation for the nutrient. The possible medication that serves to eliminate tumor cells is in terms
of drugs and is introduced into the system through the nutrient. In this setting, the control variable
acts as an external source in the nutrient equation. First, we consider the problem of `long-time
treatment' under a suitable given source and prove the convergence of any global solution to a single
equilibrium as $t\to+\infty$. Then we consider the `finite-time treatment' of a tumor, which corresponds
to an optimal control problem. Here we also allow the objective cost functional to depend on a free
time variable, which represents the unknown treatment time to be optimized. We prove the existence
of an optimal control and obtain first order necessary optimality conditions for both the drug concentration
and the treatment time. One of the main aim of the control problem is to realize in the best possible
way a desired final distribution of the tumor cells, which is expressed by the target function $\phi_\Omega$.
By establishing the Lyapunov stability of certain equilibria of the state system (without external
source), we see that $\phi_{\Omega}$ can be taken as a stable configuration, so that the tumor will
not grow again once the finite-time treatment is completed. 