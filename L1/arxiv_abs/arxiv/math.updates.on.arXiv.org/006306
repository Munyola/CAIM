We present and rigorously analyze the behavior of a distributed, stochastic algorithm for separation
and integration in self-organizing particle systems, an abstraction of programmable matter.
Such systems are composed of individual computational particles with limited memory, strictly
local communication abilities, and modest computational power. We consider heterogeneous particle
systems of two different colors and prove that these systems can collectively separate into different
color classes or integrate, indifferent to color. We accomplish both behaviors with the same fully
distributed, local, stochastic algorithm. Achieving separation or integration depends only
on a single global parameter determining whether particles prefer to be next to other particles
of the same color or not; this parameter is meant to represent external, environmental influences
on the particle system. The algorithm is a generalization of a previous distributed, stochastic
algorithm for compression (PODC '16), which can be viewed as a special case of separation where all
particles have the same color. It is significantly more challenging to prove that the desired behavior
is achieved in the heterogeneous setting, however, even in the bichromatic case we focus on. This
requires combining several new techniques, including the cluster expansion from statistical
physics, a new variant of the bridging argument of Miracle, Pascoe and Randall (RANDOM '11), the
high-temperature expansion of the Ising model, and careful probabilistic arguments. 