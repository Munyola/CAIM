We introduce a sub-grid model for the non-equilibrium abundance of molecular hydrogen in cosmological
simulations of galaxy formation. We improve upon previous work by accounting for the unresolved
structure of molecular clouds in a phenomenological way which combines both observational and
numerical results on the properties of the turbulent interstellar medium. We apply the model to
a cosmological simulation of the formation of a Milky-Way-sized galaxy at z=2, and compare the results
to those obtained using other popular prescriptions that compute the equilibrium abundance of
H2. In these runs we introduce an explicit link between star formation and the local H2 abundance,
and perform an additional simulation in which star formation is linked directly to the density of
cold gas. We find that, although the global properties of the simulated galaxy are relatively insensitive
to the sub-grid H2 models, the resulting spatial distribution of H2 is not: molecules extend further
into the outer disc of the galaxy in our non-equilibrium model. In addition, the destruction of molecules
by supernovae, if substantial, may result in a depletion of the H2 abundance in the innermost 2-3
kpc. Finally, we study dwarf-sized galaxies that lie in the high-resolution region of our simulations
and show that their star formation histories are significantly affected by both early metal enrichment
and numerical resolution. We conclude that further work is needed in order to verify recent claims
on the abundance of dark galaxies at high redshift. 