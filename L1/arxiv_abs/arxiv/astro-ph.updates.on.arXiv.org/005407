There are two major theoretical issues for the star formation law (the relation between the surface
densities of molecular gas and star formation rate on a galaxy scale): (i) At low metallicity, it
is not obvious that star-forming regions are rich in H$_2$ because the H$_2$ formation rate depends
on the dust abundance; and (ii) whether or not CO really traces H$_2$ is uncertain, especially at
low metallicity. To clarify these issues, we use a hydrodynamic simulation of an isolated disc galaxy
with a spatial resolution of a few tens parsecs. The evolution of dust abundance and grain size distribution
is treated consistently with the metal enrichment and the physical state of the interstellar medium.
We compute the H$_2$ and CO abundances using a subgrid post-processing model based on the dust abundance
and the dissociating radiation field calculated in the simulation. We find that when the metallicity
is $\lesssim 0.4$ Z$_\odot$ ($t<1$ Gyr), H$_2$ is not a good tracer of star formation rate because
H$_2$-rich regions are limited to dense compact regions. At $Z\gtrsim 0.8$ Z$_\odot$, a tight star
formation law is established for both H$_2$ and CO. At old ($t \sim 10$ Gyr) ages, we also find that
adopting the so-called MRN grain size distribution with an appropriate dust-to-metal ratio over
the entire disc gives reasonable estimates for the H$_2$ and CO abundances. For CO, improving the
spatial resolution of the simulation is important while the H$_2$ abundance is not sensitive to
sub-resolution structures at $Z\gtrsim 0.4$ Z$_\odot$. 