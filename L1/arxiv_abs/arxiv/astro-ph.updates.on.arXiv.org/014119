Studies of internal structure of gas giant planets suggest that their envelopes are enriched with
heavier elements than hydrogen and helium relative to their central stars. Such enrichment likely
occurred by solid accretion during late formation stages of gas giant planets in which gas accretion
dominates protoplanetary growth. Some previous studies performed orbital integration of planetesimals
around a growing protoplanet with the assumption of an uniform circumstellar disc to investigate
how efficiently the protoplanet captures planetesimals. However, not only planetesimals but
also disc gas are gravitationally perturbed by the protoplanet in its late formation stages, resulting
in gap opening in the circumstellar disc. In this study, we investigate the effects of such gap formation
on the capture of planetesimals by performing dynamical simulations of planetesimals around a
growing proto-gas giant planet. Gap formation reduces the surface density of disc gas, makes a steep
pressure gradient and limits the growth rate of the protoplanet. We find that the first effect enhances
the capture of planetesimals, while the others reduce it. Consequently the amount of planetesimals
captured during the gas accretion is estimated to be at most ~3 Mearth. We conclude that the in-situ
capture of planetesimals needs the initial solid surface density more than five times higher than
that of the minimum mass solar nebula for explaining the inferred large amount of heavy element in
Jupiter. For highly dense warm Jupiters, we would need additional processes enhancing the capture
and/or supply of planetesimals. 